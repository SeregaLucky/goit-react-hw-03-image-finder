{"version":3,"sources":["component/Modal/Modal.module.css","component/Gallery/PhotoCard/PhotoCard.module.css","component/SearchForm/SearchForm.module.css","component/Gallery/Gallery.module.css","component/SearchForm/SearchForm.js","component/Gallery/PhotoCard/PhotoCard.js","component/Gallery/Gallery.js","component/Modal/Modal.js","servises/api.js","component/App/App.js","index.js","component/App/App.module.css"],"names":["module","exports","SearchForm","state","query","handleChange","e","setState","target","value","handleSubmit","preventDefault","props","onWriteFindWord","this","className","styles","searchForm","onSubmit","type","autoComplete","placeholder","name","onChange","Component","PhotoCard","item","onOpenModal","id","webformatURL","likes","views","comments","downloads","photoCard","src","alt","stats","statsItem","fullscreenButton","onClick","Gallery","items","allItems","map","key","gallery","MODAL_ROOT","document","querySelector","Modal","backdropRef","createRef","clickCode","code","onCloseModal","handleBackdropClick","current","window","addEventListener","removeEventListener","url","createPortal","overlay","ref","role","modal","instance","axios","create","baseURL","fetchPhotos","findWord","pageNumber","otherURL","get","then","response","data","hits","catch","err","Error","App","isModalOpen","idClickPhoto","isLoading","error","fetchGetPhotos","finally","resetOldStateAndWriteNewData","openModal","closeModal","prevProps","prevState","length","scrollTo","top","body","scrollHeight","behavior","needItem","filter","app","largeImageURL","button","disabled","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.d4d3930c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2cbcp\",\"modal\":\"Modal_modal__24kfI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"photoCard\":\"PhotoCard_photoCard__2EWFL\",\"stats\":\"PhotoCard_stats__1AeCi\",\"statsItem\":\"PhotoCard_statsItem__1tp1I\",\"fullscreenButton\":\"PhotoCard_fullscreenButton__2IU53\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchForm\":\"SearchForm_searchForm__1LEKF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"Gallery_gallery__1rjjF\"};","/* import - node_modules */\r\nimport React, { Component } from 'react';\r\nimport T from 'prop-types';\r\n/* import - CSS */\r\nimport styles from './SearchForm.module.css';\r\n\r\n/*\r\n * COMPONENT\r\n */\r\nclass SearchForm extends Component {\r\n  static propTypes = {\r\n    onWriteFindWord: T.func.isRequired,\r\n  };\r\n\r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleChange = e => {\r\n    this.setState({ query: e.target.value });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    this.props.onWriteFindWord(this.state.query);\r\n\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n  render() {\r\n    const { query } = this.state;\r\n\r\n    return (\r\n      <form className={styles.searchForm} onSubmit={this.handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          placeholder=\"Search images...\"\r\n          name=\"search\"\r\n          value={query}\r\n          onChange={this.handleChange}\r\n        />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchForm;\r\n","/* import - node_modules */\r\nimport React from 'react';\r\nimport T from 'prop-types';\r\n/* import - CSS */\r\nimport styles from './PhotoCard.module.css';\r\n\r\n/*\r\n * COMPONENT\r\n */\r\nconst PhotoCard = ({ item, onOpenModal }) => {\r\n  const { id, webformatURL, likes, views, comments, downloads } = item;\r\n\r\n  return (\r\n    <div className={styles.photoCard}>\r\n      <img src={webformatURL} alt=\"\" />\r\n\r\n      <div className={styles.stats}>\r\n        <p className={styles.statsItem}>\r\n          <i className=\"material-icons\">thumb_up</i>\r\n          {likes}\r\n        </p>\r\n        <p className={styles.statsItem}>\r\n          <i className=\"material-icons\">visibility</i>\r\n          {views}\r\n        </p>\r\n        <p className={styles.statsItem}>\r\n          <i className=\"material-icons\">comment</i>\r\n          {comments}\r\n        </p>\r\n        <p className={styles.statsItem}>\r\n          <i className=\"material-icons\">cloud_download</i>\r\n          {downloads}\r\n        </p>\r\n      </div>\r\n\r\n      {/* <!-- Кнопка для открытия модалки с большим изображением, появляется при наведении --> */}\r\n      <button\r\n        type=\"button\"\r\n        className={styles.fullscreenButton}\r\n        onClick={() => onOpenModal(id)}\r\n      >\r\n        <i className=\"material-icons\">zoom_out_map</i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nPhotoCard.propTypes = {\r\n  item: T.shape({\r\n    id: T.number.isRequired,\r\n    webformatURL: T.string.isRequired,\r\n    likes: T.number.isRequired,\r\n    views: T.number.isRequired,\r\n    comments: T.number.isRequired,\r\n    downloads: T.number.isRequired,\r\n  }).isRequired,\r\n\r\n  onOpenModal: T.func.isRequired,\r\n};\r\n\r\nexport default PhotoCard;\r\n","/* import - node_modules */\r\nimport React from 'react';\r\nimport T from 'prop-types';\r\n/* import - CSS */\r\nimport styles from './Gallery.module.css';\r\n/* import - COMPONENT */\r\nimport PhotoCard from './PhotoCard/PhotoCard';\r\n\r\n/*\r\n * COMPONENT\r\n */\r\nconst Gallery = ({ items, onOpenModal }) => {\r\n  const allItems = items.map(item => (\r\n    <PhotoCard key={item.id} item={item} onOpenModal={onOpenModal} />\r\n  ));\r\n\r\n  return <ul className={styles.gallery}>{allItems}</ul>;\r\n};\r\n\r\nGallery.propTypes = {\r\n  items: T.arrayOf(T.shape()).isRequired,\r\n  onOpenModal: T.func.isRequired,\r\n};\r\n\r\nexport default Gallery;\r\n","/* import - node_modules */\r\nimport React, { Component, createRef } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport T from 'prop-types';\r\n/* import - CSS */\r\nimport styles from './Modal.module.css';\r\n\r\nconst MODAL_ROOT = document.querySelector('#modal-root');\r\n\r\n/*\r\n * COMPONENT\r\n */\r\nclass Modal extends Component {\r\n  static propTypes = {\r\n    onCloseModal: T.func.isRequired,\r\n    url: T.string.isRequired,\r\n  };\r\n\r\n  backdropRef = createRef();\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.clickCode);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.clickCode);\r\n  }\r\n\r\n  clickCode = e => {\r\n    if (e.code !== 'Escape') return;\r\n\r\n    this.props.onCloseModal();\r\n  };\r\n\r\n  handleBackdropClick = e => {\r\n    if (this.backdropRef.current && e.target !== this.backdropRef.current) {\r\n      return;\r\n    }\r\n\r\n    this.props.onCloseModal();\r\n  };\r\n\r\n  render() {\r\n    const { url } = this.props;\r\n\r\n    return createPortal(\r\n      <div\r\n        className={styles.overlay}\r\n        ref={this.backdropRef}\r\n        onClick={this.handleBackdropClick}\r\n        role=\"presentation\"\r\n      >\r\n        <div className={styles.modal}>\r\n          <img src={url} alt=\"\" />\r\n        </div>\r\n      </div>,\r\n      MODAL_ROOT,\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n  baseURL: 'https://pixabay.com/api/',\r\n});\r\n\r\nconst fetchPhotos = (findWord = '', pageNumber = 1) => {\r\n  const otherURL = `?image_type=photo&orientation=horizontal&q=${findWord}&page=${pageNumber}&per_page=12&key=12935223-ebb6e80bcfb15004a250fd4eb`;\r\n\r\n  return instance\r\n    .get(otherURL)\r\n    .then(response => response.data.hits)\r\n    .catch(err => Error(err));\r\n};\r\n\r\nexport default fetchPhotos;\r\n","/* import - node_modules */\r\nimport React, { Component } from 'react';\r\n/* import - CSS */\r\nimport styles from './App.module.css';\r\n/* import - COMPONENT */\r\nimport SearchForm from '../SearchForm/SearchForm';\r\nimport Gallery from '../Gallery/Gallery';\r\nimport Modal from '../Modal/Modal';\r\n/* import - api */\r\nimport fetchPhotos from '../../servises/api';\r\n\r\n/*\r\n * COMPONENT\r\n */\r\nclass App extends Component {\r\n  state = {\r\n    items: [],\r\n    findWord: '',\r\n    pageNumber: 1,\r\n    isModalOpen: false,\r\n    idClickPhoto: '',\r\n    isLoading: false,\r\n    error: null,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { items, findWord } = this.state;\r\n\r\n    if (prevState.items.length !== items.length) {\r\n      window.scrollTo({\r\n        top: document.body.scrollHeight,\r\n        behavior: 'smooth',\r\n      });\r\n    }\r\n\r\n    if (prevState.findWord === findWord) return;\r\n\r\n    this.fetchGetPhotos();\r\n  }\r\n\r\n  fetchGetPhotos = () => {\r\n    this.setState({ isLoading: true });\r\n\r\n    fetchPhotos(this.state.findWord, this.state.pageNumber)\r\n      .then(hits =>\r\n        this.setState(state => ({\r\n          items: [...state.items, ...hits],\r\n          pageNumber: state.pageNumber + 1,\r\n        })),\r\n      )\r\n      .catch(error => this.setState({ error }))\r\n      .finally(() => this.setState({ isLoading: false }));\r\n  };\r\n\r\n  resetOldStateAndWriteNewData = findWord => {\r\n    if (findWord === this.state.findWord) return;\r\n\r\n    this.setState({\r\n      items: [],\r\n      pageNumber: 1,\r\n      findWord,\r\n    });\r\n  };\r\n\r\n  openModal = id => {\r\n    this.setState({ isModalOpen: true, idClickPhoto: id });\r\n  };\r\n\r\n  closeModal = () => {\r\n    this.setState({ isModalOpen: false, idClickPhoto: '' });\r\n  };\r\n\r\n  render() {\r\n    const { items, isModalOpen, idClickPhoto, isLoading, error } = this.state;\r\n\r\n    const needItem = items.filter(item => item.id === idClickPhoto);\r\n\r\n    return (\r\n      <div className={styles.app}>\r\n        <SearchForm onWriteFindWord={this.resetOldStateAndWriteNewData} />\r\n        <Gallery items={items} onOpenModal={this.openModal} />\r\n\r\n        {isModalOpen && (\r\n          <Modal\r\n            url={needItem[0].largeImageURL}\r\n            onCloseModal={this.closeModal}\r\n          />\r\n        )}\r\n\r\n        {error && <psan>Произошла ошибка.</psan>}\r\n\r\n        {items.length > 0 && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={this.fetchGetPhotos}\r\n            className={styles.button}\r\n            disabled={isLoading}\r\n          >\r\n            Load more\r\n          </button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","/* import - node_modules */\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n/* import - CSS */\r\nimport './index.css';\r\n/* import - COMPONENT */\r\nimport App from './component/App/App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3BcX8\",\"button\":\"App_button__32Xf9\"};"],"sourceRoot":""}